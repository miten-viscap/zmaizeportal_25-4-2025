sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/routing/History","sap/ui/core/UIComponent"],function(e,t,a,i,r){"use strict";var o;return e.extend("MaizeProcurementPortal.MaizeProcurementPortal.controller.CreateGp",{onInit:function(){var e="/sap/opu/odata/sap/ZGW_GATEPASS_SRV/";o=new sap.ui.model.odata.ODataModel(e);this.getView().setModel(o);o.setSizeLimit(5e3);this.AutoFillDetails()},AutoFillDetails:function(){var e="DINKABAP";var t=this;o.read("/UserSet(Userid='"+e+"')",{method:"GET",success:function(e,a){var i=e.Werks;var r=e.Matnr;var o=e.Lifnr;t.byId("plantnum").setValue(i);t.byId("MatCode").setValue(r);t.byId("VendorNum").setValue(o);t.LiveMatChange()},error:function(e,t){sap.m.MessageToast.show("Somthing is wrong. Please contact your Backend Administrator")}})},onFromdate:function(){var e=this.byId("FromPOdate").getDateValue();this.byId("ToPOdate").setMinDate(e)},CreateGP:function(){var e=this.byId("plantnum");var t=e.getValue();var a=this.byId("VendorNum").getValue();var i=this.byId("FromPOdate").getValue();var r=this.byId("ToPOdate").getValue();var o=this.byId("MatCode");var s=o.getValue();var n=this.byId("POid").getValue();var l="000000000000";var u=l+""+s;if(t==""||s==""){sap.m.MessageToast.show("Please Fill all the Mandatory fields");e.setValueState("Error");o.setValueState("Error")}else{e.setValueState("None");o.setValueState("None");var d="1111-11-11T00:00:00";var v=sap.ui.core.format.DateFormat.getInstance({pattern:"yyyy-MM-ddThh:mm:ss"});var h=v.format(new Date(d));if(a==""){var a=99999999}if(i==""){var i=h}if(r==""){var r=h}if(n==""){var n=99999999}if(a==99999999||i==h||r==h||n==99999999){var m=t;var c=a;var g=i;var p=r;var f=u;var V=n;var P=s;var y=sap.ui.core.UIComponent.getRouterFor(this);y.navTo("GPList",{invoicePath:m,invoicePath1:c,invoicePath2:g,invoicePath3:p,invoicePath5:f,invoicePath6:V,invoicePath7:P})}this.byId("FromPOdate").setValue("");this.byId("ToPOdate").setValue("");this.byId("POid").setValue("");this.byId("POid").setSelectedKey("")}},LiveMatChange:function(){var e=this.byId("plantnum").getValue();var t=this.byId("VendorNum").getValue();var i=this.byId("FromPOdate").getValue();var r=this.byId("ToPOdate").getValue();var o=this.byId("MatCode").getValue();var s="1111-11-11T00:00:00";var n=sap.ui.core.format.DateFormat.getInstance({pattern:"yyyy-MM-ddThh:mm:ss"});var l=n.format(new Date(s));if(t==""){var t=99999999}if(i==""){var i=l}if(r==""){var r=l}if(r==l||i==l||t==99999999){var u="000000000000";var d=u+o;var v=[];if(e&&e.length>0){if(i==l&&r==l){i="";r="";var h=new sap.ui.model.Filter("Werks",a.EQ,e);var m=new sap.ui.model.Filter("Lifnr",a.EQ,t);var c=new sap.ui.model.Filter("Matnr",a.EQ,d);v.push(h,m,c)}else if(r==l){r="";var h=new sap.ui.model.Filter("Werks",a.EQ,e);var m=new sap.ui.model.Filter("Lifnr",a.EQ,t);var g=new sap.ui.model.Filter("Bedat",a.EQ,i);var c=new sap.ui.model.Filter("Matnr",a.EQ,d);v.push(h,m,g,c)}else{var h=new sap.ui.model.Filter("Werks",a.EQ,e);var m=new sap.ui.model.Filter("Lifnr",a.EQ,t);var p=new sap.ui.model.Filter("Bedat",a.BT,i,r);var c=new sap.ui.model.Filter("Matnr",a.EQ,d);v.push(h,m,p,c)}}var f=this.byId("POid");var V=f.getBinding("items");V.filter(v,"Application")}},onNavBack:function(){var e=r.getRouterFor(this);e.navTo("Gate_Pass")},CallFunc:function(){sap.m.MessageToast.show("dsffhjsfg")},onValueHelpVendorNum:function(){if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("MaizeProcurementPortal.MaizeProcurementPortal.view.ValueHelpVendor",this);this.getView().addDependent(this._oDialog)}this._oDialog.open()},cancelvend:function(){this._oDialog.close()},ValueHelpVendor:function(e){this._item=e.getSource().getBindingContext().getObject();var t=this._item;var a=t.Lifnr;this.byId("VendorNum").setValue(a);this._oDialog.close()},onValueHelpMatNum:function(){if(!this._oDialog1){this._oDialog1=sap.ui.xmlfragment("MaizeProcurementPortal.MaizeProcurementPortal.view.ValueHelpMatCode",this);this.getView().addDependent(this._oDialog1)}this._oDialog1.open()},cancel:function(){this._oDialog1.close()},ValueHelpMatCode:function(e){this._item=e.getSource().getBindingContext().getObject();var t=this._item;var a=t.Matnr;this.byId("MatCode").setValue(a);this._oDialog1.close();this.LiveMatChange()}})});
//# sourceMappingURL=CreateGp.controller.js.map