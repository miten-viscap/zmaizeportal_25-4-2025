sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/UIComponent","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,a,i,r){"use strict";var o;return e.extend("MaizeProcurementPortal.MaizeProcurementPortal.controller.ChanDispSelectScreen",{onInit:function(){var e="/sap/opu/odata/sap/ZGW_GATEPASS_SRV/";o=new sap.ui.model.odata.ODataModel(e);this.getView().setModel(o);o.setSizeLimit(5e3);this.AutoFillDetails();var t=this.byId("GPnum");t.getModel().refresh(true)},AutoFillDetails:function(){o.refresh(true);var e=sap.ushell.Container.getService("UserInfo").getId();var t=this;o.read("/UserSet(Userid='"+e+"')",{method:"GET",success:function(e,a){var i=e.Werks;var r=e.Matnr;var o=e.Lifnr;t.byId("plantnum").setValue(i);t.byId("MatCode").setValue(r);t.byId("VendorNum").setValue(o);t.LiveMatChange()},error:function(e,t){sap.m.MessageToast.show("Somthing is wrong. Please contact your Backend Administrator")}})},onFromdate:function(){var e=this.byId("FromPOdate").getDateValue();this.byId("ToPOdate").setMinDate(e)},onNavBack:function(){var e=a.getRouterFor(this);e.navTo("Gate_Pass")},ViewGPDetails:function(){var e=this.byId("plantnum").getValue();var t=this.byId("MatCode").getValue();if(e==""||t==""){sap.m.MessageToast.show("Please Fill Mandatory fields")}else{var e=this.byId("plantnum");var a=e.getValue();var i=this.byId("VendorNum").getValue();var r=this.byId("FromPOdate").getValue();var o=this.byId("ToPOdate").getValue();var t=this.byId("MatCode");var s=t.getValue();var n=this.byId("POid").getSelectedKey();var l=this.byId("GPnum").getSelectedKey();var d=this.byId("GPdate").getValue();var u="000000000000";var v=u+""+s;if(a==""||s==""){sap.m.MessageToast.show("Please Fill all the Mandatory fields");e.setValueState("Error");t.setValueState("Error")}else{e.setValueState("None");t.setValueState("None");var h="1111-11-11T00:00:00";var m=sap.ui.core.format.DateFormat.getInstance({pattern:"yyyy-MM-ddThh:mm:ss"});var c=m.format(new Date(h));if(i==""){var i=99999999}if(l==""){var l=99999999}if(r==""){var r=c}if(o==""){var o=c}if(n==""){var n=99999999}if(d==""){var d=c}if(i==99999999||r==c||o==c||n==99999999||d==c||l==99999999){var p=a;var g=i;var f=r;var y=o;var P=v;var V=n;var I=s;var M=l;var b=d;var F=sap.ui.core.UIComponent.getRouterFor(this);F.navTo("ChaDispGpList",{invoicePath:p,invoicePath1:g,invoicePath2:f,invoicePath3:y,invoicePath5:P,invoicePath6:V,invoicePath7:I,invoicePath8:M,invoicePath9:b});this.byId("FromPOdate").setValue("");this.byId("ToPOdate").setValue("");this.byId("POid").setValue("");this.byId("GPnum").setValue("");this.byId("GPdate").setValue("");this.byId("GPnum").setSelectedKey("");this.byId("POid").setSelectedKey("")}}}},onValueHelpVendorNum:function(){if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("MaizeProcurementPortal.MaizeProcurementPortal.view.ValueHelpVendor",this);this.getView().addDependent(this._oDialog)}this._oDialog.open()},cancel:function(){this._oDialog.close()},ValueHelpVendor:function(e){this._item=e.getSource().getBindingContext().getObject();var t=this._item;var a=t.Lifnr;this.byId("VendorNum").setValue(a);this._oDialog.close()},onValueHelpMatNum:function(){if(!this._oDialog1){this._oDialog1=sap.ui.xmlfragment("MaizeProcurementPortal.MaizeProcurementPortal.view.ValueHelpMatCode",this);this.getView().addDependent(this._oDialog1)}this._oDialog1.open()},cancelvend:function(){var e=this;this._oDialog.close()},ValueHelpMatCode:function(e){this._item=e.getSource().getBindingContext().getObject();var t=this._item;var a=t.Matnr;this.byId("MatCode").setValue(a);this._oDialog1.close();this.LiveMatChange()},LiveMatChange:function(){var e=this.byId("plantnum").getValue();var t=this.byId("VendorNum").getValue();var a=this.byId("FromPOdate").getValue();var i=this.byId("ToPOdate").getValue();var o=this.byId("MatCode").getValue();var s="1111-11-11T00:00:00";var n=sap.ui.core.format.DateFormat.getInstance({pattern:"yyyy-MM-ddThh:mm:ss"});var l=n.format(new Date(s));if(t==""){var t=99999999}if(a==""){var a=l}if(i==""){var i=l}if(i==l||a==l||t==99999999){var d="000000000000";var u=d+o;var v=[];if(e&&e.length>0){if(a==l&&i==l){a="";i="";var h=new sap.ui.model.Filter("Werks",r.EQ,e);var m=new sap.ui.model.Filter("Lifnr",r.EQ,t);var c=new sap.ui.model.Filter("Matnr",r.EQ,u);v.push(h,m,c)}else if(i==l){i="";var h=new sap.ui.model.Filter("Werks",r.EQ,e);var m=new sap.ui.model.Filter("Lifnr",r.EQ,t);var p=new sap.ui.model.Filter("Bedat",r.EQ,a);var c=new sap.ui.model.Filter("Matnr",r.EQ,u);v.push(h,m,p,c)}else{var h=new sap.ui.model.Filter("Werks",r.EQ,e);var m=new sap.ui.model.Filter("Lifnr",r.EQ,t);var g=new sap.ui.model.Filter("Bedat",r.BT,a,i);var c=new sap.ui.model.Filter("Matnr",r.EQ,u);v.push(h,m,g,c)}}var f=this.byId("POid");var y=f.getBinding("items");y.filter(v,"Application");var P="1111-11-11T11:11:11";var V=[];var I=new sap.ui.model.Filter("Werks",r.EQ,e);var M=new sap.ui.model.Filter("Matnr",r.EQ,u);var b=new sap.ui.model.Filter("Bedat",r.EQ,P);var F=new sap.ui.model.Filter("Gpassdt",r.EQ,P);V.push(I,M,b,F);var w=this.byId("GPnum");var D=w.getBinding("items");D.filter(V,"Application")}}})});
//# sourceMappingURL=ChanDispSelectScreen.controller.js.map