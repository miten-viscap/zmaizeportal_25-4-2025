sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/UIComponent","sap/m/MessageBox","sap/m/PDFViewer"],function(e,t,a,s,i){"use strict";var r;var l;var d;var o;var n;var u;var b;var g;var y;var h;var I;var c;var p;var v;var f;var V;var m;return e.extend("MaizeProcurementPortal.MaizeProcurementPortal.controller.ChanDispScreen",{onInit:function(){this.byId("Billbags").setValue("0.00");var e="/sap/opu/odata/sap/ZGW_GATEPASS_SRV/";r=new sap.ui.model.odata.ODataModel(e);this.getView().setModel(r);var t=sap.ui.core.UIComponent.getRouterFor(this);t.getRoute("ChanDispScreen").attachPatternMatched(this._onObjectMatched,this);this._pdfViewer=new i;this.getView().addDependent(this._pdfViewer)},onNavBack:function(){this.byId("labNoBags").setProperty("required",false);this.byId("labMandirec").setProperty("required",false);this.byId("lanNoUnloadBags").setProperty("required",false);var e=window.localStorage.getItem("key1");var a=e.split("/")[1];var s=e.split("/")[2];var i=e.split("/")[3];var r=e.split("/")[4];var l=e.split("/")[5];var d=e.split("/")[6];var o=e.split("/")[7];var n=e.split("/")[8];var u=e.split("/")[9];var b=t.getInstance();var g=b.getPreviousHash();if(g!==undefined){window.history.go(-1)}else{var y=sap.ui.core.UIComponent.getRouterFor(this);y.navTo("ChaDispGpList",{invoicePath:a,invoicePath1:s,invoicePath2:i,invoicePath3:r,invoicePath5:l,invoicePath6:d,invoicePath7:o,invoicePath8:n,invoicePath9:u})}},inputlivebags:function(){var e=this.byId("Billbags").getValue();var t="^[0-9]*$";if(e.match(t)){this.byId("Billbags").setValueState("None")}else{this.byId("Billbags").setValueState("Error")}},inputlivebags2:function(){var e=this.byId("RejectedBags").getValue();var t="^[0-9]*$";if(e.match(t)){this.byId("RejectedBags").setValueState("None")}else{this.byId("RejectedBags").setValueState("Error")}},inputlivebags3:function(){var e=this.byId("TornedBags").getValue();var t="^[0-9]*$";if(e.match(t)){this.byId("TornedBags").setValueState("None")}else{this.byId("TornedBags").setValueState("Error")}},_onObjectMatched:function(e){this.SetZeroVal();g=e.getParameter("arguments").GPManifest;this.byId("GatePassNo").setValue(g);h=e.getParameter("arguments").SelMatCode;var t=e.getParameter("arguments").FlagChaDisp;if(t=="X"){this.AllFieldEditableTrue()}else{this.AllFieldEditableFalse()}if(h==="110029"){this.byId("labNoBags").setProperty("required",true);this.byId("labMandirec").setProperty("required",true);this.byId("lanNoUnloadBags").setProperty("required",true)}var a=this;r.read("/GatepassdtlSet(Gpassno='"+g+"')",{method:"GET",success:function(e,t){var s=e.Ebeln;b=e.Werks;o=e.Brokername;y=e.Bedat;h=e.Matnr;I=e.Brokerno;var i=e.TranspLrNo;var r=e.Vehicleno;var l=e.Transporter;var d=e.Station;var g=e.StName;n=e.Vendorno;u=e.Vendorname;var p=n+" "+u;var v=e.Gpassdt;var B=e.Bilno;var S=e.Bildt;var C=e.Bilwt;var D=e.Bilbag;var P=e.WtslipNo;var A=e.WtslipDt;var N=e.StorageLocation;var T=e.WtslipQty;var E=e.WtslipBag;var Q=e.Rejwt;var M=e.RejBag;var w=e.Tornbag;var _=e.Bagavgwt;var G=e.MatDoc;var R=e.MandiNo;var W=e.MandiTax;var F=e.OtherDed;var x=e.AnyOther;var L=e.RateDifference;var U=e.UsageDecision;var O=e.Message;c=e.NoQltyDeduction;m=e.PaymentOnPbw;f=e.NoGunnyDed;V=e.NoUnldChargeDed;var j=e.DocYear;var k=e.Insplot;a.byId("ipPONo").setValue(s);var q=sap.ui.core.format.DateFormat.getInstance({pattern:"dd/MM/yyyy"});var X=q.format(new Date(y));a.byId("Po_date").setValue(X);a.byId("BrokName").setValue(o);a.byId("LRGRno").setValue(i);a.byId("Truckno").setValue(r);a.byId("TransDetail").setValue(l);a.byId("Station").setValue(d);a.byId("VendName").setValue(p);a.byId("GatepassDate").setValue(v);a.byId("PartyBill").setValue(B);a.byId("PartyDate").setValue(S);a.byId("BillWeight").setValue(C);a.byId("Billbags").setValue(D);a.byId("WeightSlipNo").setValue(P);a.byId("WtSlipDate").setValue(A);a.byId("Store_loc").setValue(N);a.byId("UnloadedWeight").setValue(T);a.byId("UnloadBags").setValue(E);a.byId("RejectedWeight").setValue(Q);a.byId("RejectedBags").setValue(M);a.byId("TornedBags").setValue(w);a.byId("Avg_wt").setValue(_);a.byId("MatDoc").setValue(G);a.byId("ReceiptNum").setValue(R);a.byId("MandiTax").setValue(W);a.byId("OtherDeduct").setValue(F);a.byId("AnyOtherDeduct").setValue(x);a.byId("RateDiff").setValue(L);a.byId("remarksany").setValue(O);if(c=="X"){a.byId("Quality_deduct").setSelected(true)}else{a.byId("Quality_deduct").setSelected(false)}if(m=="X"){a.byId("Pay_Weight").setSelected(true)}else{a.byId("Pay_Weight").setSelected(false)}if(f=="X"){a.byId("GunnyBag_deduct").setSelected(true)}else{a.byId("GunnyBag_deduct").setSelected(false)}if(V=="X"){a.byId("UnloadCharge_deduct").setSelected(true)}else{a.byId("UnloadCharge_deduct").setSelected(false)}if(U=="A"){var z="A-Accept";a.byId("UsageDes").setValue(z)}else{a.byId("UsageDes").setValue(U)}if(j=="0000"){a.byId("DocYr").setValue("")}else{a.byId("DocYr").setValue(j)}if(k=="000000000000"){a.byId("InspLot").setValue("")}else{a.byId("InspLot").setValue(k)}},error:function(e,t){sap.m.MessageToast.show("Somthing is wrong. Please contact your Backend Administrator")}})},CheckBox1:function(){var e=this.byId("Quality_deduct");if(e.getSelected()){l="X"}else{l=""}},CheBoxPay:function(){var e=this.byId("Pay_Weight");if(e.getSelected()){m="X"}else{m=""}},CheckBox2:function(){var e=this.byId("GunnyBag_deduct");if(e.getSelected()){f="X"}else{f=""}},CheckBox3:function(){var e=this.byId("UnloadCharge_deduct");if(e.getSelected()){V="X"}else{V=""}},onInputDecimalChange:function(e){var t=this.byId("BillWeight").getValue();if(t!=""){this.byId("BillWeight").setMaxLength(11);var a=t*1;var s=a.toFixed(3);this.byId("BillWeight").setValue(s);this.byId("BillWeight").setMaxLength(8)}else{this.byId("Billbags").setValue("0.00")}},onInputDecimalChange1:function(e){var t=this.byId("Billbags").getValue();if(t!=""){this.byId("Billbags").setMaxLength(11);var a=t*1;var s=a.toFixed(3);this.byId("Billbags").setValue(s);this.byId("Billbags").setMaxLength(8)}else{this.byId("Billbags").setValue("0.00")}},onInputDecimalChange2:function(e){var t=this.byId("TornedBags").getValue();if(t!=""){this.byId("TornedBags").setMaxLength(11);var a=t*1;var s=a.toFixed(3);this.byId("TornedBags").setValue(s);this.byId("TornedBags").setMaxLength(8)}else{this.byId("TornedBags").setValue("0.00")}},onInputDecimalChange3:function(e){var t=this.byId("RejectedWeight").getValue();if(t!=""){this.byId("RejectedWeight").setMaxLength(11);var a=t*1;var s=a.toFixed(3);this.byId("RejectedWeight").setValue(s);this.byId("RejectedWeight").setMaxLength(8)}else{this.byId("RejectedWeight").setValue("0.00")}},Stor_caps:function(){var e=this.byId("Store_loc").getValue().toUpperCase();this.byId("Store_loc").setValue(e)},DivAvgWt:function(){},GpLivedate:function(){var e=this.byId("GatepassDate").getValue();this.byId("WtSlipDate").setValue(e)},OnSaveBtn:function(){var e=this.byId("MatDoc").getValue();if(e==""){if(h==="110029"){var t=this.byId("Billbags").getValue();var a=this.byId("ReceiptNum").getValue();var i=this.byId("UnloadBags").getValue();if(t==="0.00"){this.byId("Billbags").setValueState("Error");this.byId("ReceiptNum").setValueState("None");this.byId("UnloadBags").setValueState("None");this.byId("ReceiptNum").setValue("");this.byId("UnloadBags").setValue("");return}if(a===""){this.byId("ReceiptNum").setValueState("Error");this.byId("Billbags").setValueState("None");this.byId("UnloadBags").setValueState("None");this.byId("Billbags").setValue("0.00");this.byId("UnloadBags").setValu("");return}if(i===""){this.byId("UnloadBags").setValueState("Error");this.byId("Billbags").setValueState("None");this.byId("ReceiptNum").setValueState("None");this.byId("Billbags").setValue("0.00");this.byId("ReceiptNum").setValue("");return}this.byId("Billbags").setValueState("None");this.byId("ReceiptNum").setValueState("None");this.byId("UnloadBags").setValueState("None");var c=this;var p=this.getView();var v=[p.byId("GatePassNo"),p.byId("ipPONo"),p.byId("GatepassDate"),p.byId("PartyBill"),p.byId("VendName"),p.byId("WeightSlipNo"),p.byId("PartyDate"),p.byId("BillWeight")];jQuery.each(v,function(e,t){if(!t.getValue()){t.setValueState("Error")}else{t.setValueState("None")}});var B=true;jQuery.each(v,function(e,t){if(t.getValueState()==="Error"){B=false;return false}});if(!B){sap.m.MessageToast.show("Please Fill all Mandatory Fields")}else{var S=this.byId("GatePassNo");var C=this.byId("ipPONo");var D=this.byId("LRGRno");var P=this.byId("Truckno");var A=this.byId("Station");var N=this.byId("TransDetail");var T=this.byId("GatepassDate").getValue();var E=this.byId("PartyBill");var Q=this.byId("PartyDate").getValue();var M=this.byId("BillWeight");var w=this.byId("Billbags");var _=this.byId("WeightSlipNo");var G=this.byId("WtSlipDate").getValue();var R=this.byId("Store_loc");var W=this.byId("UnloadedWeight");var F=this.byId("UnloadBags");var x=this.byId("RejectedWeight");var L=this.byId("RejectedBags");var U=this.byId("TornedBags");var O=this.byId("Avg_wt");var j=this.byId("ReceiptNum");var k=this.byId("MandiTax");var q=this.byId("OtherDeduct");var X=this.byId("AnyOtherDeduct");var z=this.byId("RateDiff");var Y=this.byId("remarksany");var $="1111-11-11T00:00:00";var H=sap.ui.core.format.DateFormat.getInstance({pattern:"yyyy-MM-ddThh:mm:ss"});var Z=H.format(new Date($));if(Q==""){Q=Z}if(Q!==""){var K={};var J=this.byId("Quality_deduct").getSelected();if(J==false){l=""}else{l="X"}var ee=this.byId("Pay_Weight").getSelected();if(ee==false){m=""}else{m="X"}var te=this.byId("GunnyBag_deduct").getSelected();if(te==false){f=""}else{f="X"}var ae=this.byId("UnloadCharge_deduct").getSelected();if(ae==false){V=""}else{V="X"}K.QltyPar=d;K.NoQltyDeduction=l;K.NoGunnyDed=f;K.NoUnldChargeDed=V;K.PaymentOnPbw=m;K.Werks=b;K.Bedat=y;K.Matnr=h;K.Gpassno=S.getValue();K.Ebeln=C.getValue();K.Brokerno=I;K.Brokername=o;K.Vendorno=n;K.Vendorname=u;K.TranspLrNo=D.getValue();K.Vehicleno=P.getValue();if(A.getValue()===""){sap.m.MessageBox.error("Station code is mandatory. Kindly select station code first.");return false}K.StName=this.desc;K.Station=this.key;K.Transporter=N.getValue();K.Gpassdt=T;K.Bilno=E.getValue();K.Bildt=Q;K.Bilwt=M.getValue();K.Bilbag=w.getValue();K.WtslipNo=_.getValue();K.WtslipDt=G;K.StorageLocation=R.getValue();K.WtslipQty=W.getValue();K.WtslipBag=F.getValue();K.Rejwt=x.getValue();K.RejBag=L.getValue();K.Tornbag=U.getValue();K.Bagavgwt=O.getValue();K.MandiNo=j.getValue();K.MandiTax=k.getValue();K.OtherDed=q.getValue();K.AnyOther=X.getValue();K.RateDifference=z.getValue();K.Message=Y.getValue();var se=this.byId("BillWeight").getValue();var ie=this.byId("Billbags").getValue();if(se==0){sap.m.MessageToast.show("Bill Weight can't be kept Zero")}else{r.update("/GatepassdtlSet('"+g+"')",K,{method:"PUT",success:function(e,t){var a=new DOMParser;var i=t.headers["sap-message"];if(i==undefined){sap.m.MessageToast.show("Data Has been Successfully Created");c.getView().byId("Savebtn").setEnabled(false);c.getView().byId("Cancelbtn").setEnabled(false);c.FieldEditFalseSave()}else{var r=a.parseFromString(i,"text/xml");var l=r.getElementsByTagName("message")[0].childNodes[0].nodeValue;s.error(l)}},error:function(e,t){sap.m.MessageToast.show("Somthing is wrong. Please contact your Backend Administrator")}})}}}}else{this.byId("Billbags").setValueState("None");this.byId("ReceiptNum").setValueState("None");this.byId("UnloadBags").setValueState("None");var c=this;var p=this.getView();var v=[p.byId("GatePassNo"),p.byId("ipPONo"),p.byId("GatepassDate"),p.byId("PartyBill"),p.byId("VendName"),p.byId("WeightSlipNo"),p.byId("PartyDate"),p.byId("BillWeight"),p.byId("Billbags")];jQuery.each(v,function(e,t){if(!t.getValue()){t.setValueState("Error")}else{t.setValueState("None")}});var B=true;jQuery.each(v,function(e,t){if(t.getValueState()==="Error"){B=false;return false}});if(!B){sap.m.MessageToast.show("Please Fill all Mandatory Fields")}else{var S=this.byId("GatePassNo");var C=this.byId("ipPONo");var D=this.byId("LRGRno");var P=this.byId("Truckno");var A=this.byId("Station");var N=this.byId("TransDetail");var T=this.byId("GatepassDate").getValue();var E=this.byId("PartyBill");var Q=this.byId("PartyDate").getValue();var M=this.byId("BillWeight");var w=this.byId("Billbags");var _=this.byId("WeightSlipNo");var G=this.byId("WtSlipDate").getValue();var R=this.byId("Store_loc");var W=this.byId("UnloadedWeight");var F=this.byId("UnloadBags");var x=this.byId("RejectedWeight");var L=this.byId("RejectedBags");var U=this.byId("TornedBags");var O=this.byId("Avg_wt");var j=this.byId("ReceiptNum");var k=this.byId("MandiTax");var q=this.byId("OtherDeduct");var X=this.byId("AnyOtherDeduct");var z=this.byId("RateDiff");var Y=this.byId("remarksany");var $="1111-11-11T00:00:00";var H=sap.ui.core.format.DateFormat.getInstance({pattern:"yyyy-MM-ddThh:mm:ss"});var Z=H.format(new Date($));if(Q==""){Q=Z}if(Q!==""){var K={};var J=this.byId("Quality_deduct").getSelected();if(J==false){l=""}else{l="X"}var ee=this.byId("Pay_Weight").getSelected();if(ee==false){m=""}else{m="X"}var te=this.byId("GunnyBag_deduct").getSelected();if(te==false){f=""}else{f="X"}var ae=this.byId("UnloadCharge_deduct").getSelected();if(ae==false){V=""}else{V="X"}K.QltyPar=d;K.NoQltyDeduction=l;K.NoGunnyDed=f;K.NoUnldChargeDed=V;K.PaymentOnPbw=m;K.Werks=b;K.Bedat=y;K.Matnr=h;K.Gpassno=S.getValue();K.Ebeln=C.getValue();K.Brokerno=I;K.Brokername=o;K.Vendorno=n;K.Vendorname=u;K.TranspLrNo=D.getValue();K.Vehicleno=P.getValue();if(A.getValue()===""){sap.m.MessageBox.error("Station code is mandatory. Kindly select station code first.");return false}K.StName=this.desc;K.Station=this.key;K.Transporter=N.getValue();K.Gpassdt=T;K.Bilno=E.getValue();K.Bildt=Q;K.Bilwt=M.getValue();K.Bilbag=w.getValue();K.WtslipNo=_.getValue();K.WtslipDt=G;K.StorageLocation=R.getValue();K.WtslipQty=W.getValue();K.WtslipBag=F.getValue();K.Rejwt=x.getValue();K.RejBag=L.getValue();K.Tornbag=U.getValue();K.Bagavgwt=O.getValue();K.MandiNo=j.getValue();K.MandiTax=k.getValue();K.OtherDed=q.getValue();K.AnyOther=X.getValue();K.RateDifference=z.getValue();K.Message=Y.getValue();var se=this.byId("BillWeight").getValue();var ie=this.byId("Billbags").getValue();if(se==0){sap.m.MessageToast.show("Bill Weight can't be kept Zero")}else{r.update("/GatepassdtlSet('"+g+"')",K,{method:"PUT",success:function(e,t){var a=new DOMParser;var i=t.headers["sap-message"];if(i==undefined){sap.m.MessageToast.show("Data Has been Successfully Created");c.getView().byId("Savebtn").setEnabled(false);c.getView().byId("Cancelbtn").setEnabled(false);c.FieldEditFalseSave()}else{var r=a.parseFromString(i,"text/xml");var l=r.getElementsByTagName("message")[0].childNodes[0].nodeValue;s.error(l)}},error:function(e,t){sap.m.MessageToast.show("Somthing is wrong. Please contact your Backend Administrator")}})}}}}}else{sap.m.MessageToast.show("MIGO has already performed you cannot change Gate Pass")}},OnCancelBtn:function(){var e=this.getView();var t=[e.byId("GatePassNo"),e.byId("ipPONo"),e.byId("BrokName"),e.byId("VendName"),e.byId("WeightSlipNo"),e.byId("UnloadedWeight"),e.byId("RateDiff")];jQuery.each(t,function(e,t){t.setValueState("None")});var s=a.getRouterFor(this);s.navTo("Gate_Pass")},PerformGoodsMovment:function(){var e=this;this.OnSaveBtn();var t=this.byId("InspLot").getValue();var a=this.byId("MatDoc").getValue();if(!t==""&&!a==""){sap.m.MessageToast.show("Goods Movement Already Performed")}else{var s=this.getView().byId("GatepassDate").getValue();var i=this.getView().byId("ipPONo").getValue();var r=this.getView().byId("GatePassNo").getValue();var l=this.getView().byId("UnloadedWeight").getValue();var d=this.getView().byId("Billbags").getValue();var o=this.getView().byId("Store_loc").getValue();var n=this.getView();var u=[n.byId("Store_loc"),n.byId("UnloadedWeight"),n.byId("UnloadBags")];jQuery.each(u,function(e,t){if(!t.getValue()){t.setValueState("Error")}else{t.setValueState("None")}});var b=true;jQuery.each(u,function(e,t){if(t.getValueState()==="Error"){b=false;return false}});if(!b){sap.m.MessageToast.show("Please Fill all Mandatory Fields")}else{this.getView().byId("BtnGoodMov").setVisible(true);var g=sap.ui.core.format.DateFormat.getInstance({pattern:"dd/MM/yyyy"});var y=g.format(new Date(s));if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("MaizeProcurementPortal.MaizeProcurementPortal.view.GoodsMovement",this)}sap.ui.getCore().byId("Goods_Date").setText(y);sap.ui.getCore().byId("Po_Num").setText(i);sap.ui.getCore().byId("Gp_Num").setText(r);sap.ui.getCore().byId("quantity_Num").setText(l);sap.ui.getCore().byId("Bags_Num").setText(d);sap.ui.getCore().byId("Store_locDialog").setText(o);this._oDialog.open()}}},onSubmitGMDialog:function(){this._oDialog.close();var e=this;var t=this.byId("GatepassDate").getValue();var a=this.byId("Store_loc").getValue();var i=sap.ui.getCore().byId("Po_Num").getText();var l=sap.ui.getCore().byId("Gp_Num").getText();var d=sap.ui.getCore().byId("Bags_Num").getText();var o=sap.ui.getCore().byId("quantity_Num").getText();var n=this.byId("PartyBill").getValue();var u=this.byId("PartyDate").getValue();var b=this.byId("Truckno").getValue();var g={Gpassdt:t,Bedat:t,Ebeln:i,Gpassno:l,WtslipQty:o,Bilbag:d,Bilno:n,Bildt:u,StorageLocation:a,Vehicleno:b};r.create("/MigoSet",g,{Method:"PUT",success:function(t,a){v=t.MatDoc;var i=t.DocYear;p=t.Insplot;if(v==""&&i=="0000"){var r=new DOMParser;var l=a.headers["sap-message"];var d=r.parseFromString(l,"text/xml");var o=d.getElementsByTagName("message")[0].childNodes[0].nodeValue;s.error(o)}else{var n=v+","+i;sap.m.MessageToast.show(n);e.byId("MatDoc").setValue(v);e.getView().byId("DocYr").setValue(i);e.getView().byId("InspLot").setValue(p);e.byId("BtnGenQA").setVisible(true);sap.ui.getCore().byId("Goods_Date").setText("");sap.ui.getCore().byId("Po_Num").setText("");sap.ui.getCore().byId("Gp_Num").setText("");sap.ui.getCore().byId("quantity_Num").setText("");sap.ui.getCore().byId("Bags_Num").setText("");sap.ui.getCore().byId("Store_locDialog").setText("");e.FieldEditFalseMigo()}},error:function(e,t){sap.m.MessageToast.show("Somthing is wrong. Please contact your Backend Administrator QA")}})},onCancelGmDialog:function(){this._oDialog.close()},PerformQA:function(){var e=this;var t=this.byId("InspLot").getValue();if(t==""){sap.m.MessageToast.show("Inspection Lot Number not generated yet")}else{r.read("/QAcharSet?$filter=(Insplot eq '"+t+"')",{success:function(t,a){var i=t.results.length;if(i=="0"){var r=new DOMParser;var l=a.headers["sap-message"];var d=r.parseFromString(l,"text/xml");var o=d.getElementsByTagName("message")[0].childNodes[0].nodeValue;s.error(o)}else{if(!e._oDialog1){e._oDialog1=sap.ui.xmlfragment("MaizeProcurementPortal.MaizeProcurementPortal.view.PerformQA",e)}e._oDialog1.open();var n;for(n=0;n<=t.results.length;n++){var u=t.results[n].Inspchar;if(u==="0010"){var b=t.results[n].CharDescr;sap.ui.getCore().byId("QALabel1").setVisible(true);sap.ui.getCore().byId("QAip1").setVisible(true);sap.ui.getCore().byId("QAip1").setRequired(true);sap.ui.getCore().byId("QALabel1").setText(b)}if(u==="0020"){var g=t.results[n].CharDescr;sap.ui.getCore().byId("QALabel2").setVisible(true);sap.ui.getCore().byId("QAip2").setVisible(true);sap.ui.getCore().byId("QAip2").setRequired(true);sap.ui.getCore().byId("QALabel2").setText(g)}if(u==="0030"){var y=t.results[n].CharDescr;sap.ui.getCore().byId("QALabel3").setVisible(true);sap.ui.getCore().byId("QAip3").setVisible(true);sap.ui.getCore().byId("QAip3").setRequired(true);sap.ui.getCore().byId("QALabel3").setText(y)}if(u==="0040"){var h=t.results[n].CharDescr;sap.ui.getCore().byId("QALabel4").setVisible(true);sap.ui.getCore().byId("QAip4").setVisible(true);sap.ui.getCore().byId("QAip4").setRequired(true);sap.ui.getCore().byId("QALabel4").setText(h)}if(u==="0050"){var I=t.results[n].CharDescr;sap.ui.getCore().byId("QALabel5").setVisible(true);sap.ui.getCore().byId("QAip5").setVisible(true);sap.ui.getCore().byId("QAip5").setRequired(true);sap.ui.getCore().byId("QALabel5").setText(I)}if(u==="0060"){var c=t.results[n].CharDescr;sap.ui.getCore().byId("QALabel6").setVisible(true);sap.ui.getCore().byId("QAip6").setVisible(true);sap.ui.getCore().byId("QAip6").setRequired(true);sap.ui.getCore().byId("QALabel6").setText(c)}if(u==="0070"){var p=t.results[n].CharDescr;sap.ui.getCore().byId("QALabel7").setVisible(true);sap.ui.getCore().byId("QAip7").setVisible(true);sap.ui.getCore().byId("QAip7").setRequired(true);sap.ui.getCore().byId("QALabel7").setText(p)}if(u==="0080"){var v=t.results[n].CharDescr;sap.ui.getCore().byId("QALabel8").setVisible(true);sap.ui.getCore().byId("QAip8").setVisible(true);sap.ui.getCore().byId("QAip8").setRequired(true);sap.ui.getCore().byId("QALabel8").setText(v)}if(u==="0090"){var f=t.results[n].CharDescr;sap.ui.getCore().byId("QALabel9").setVisible(true);sap.ui.getCore().byId("QAip9").setVisible(true);sap.ui.getCore().byId("QAip9").setRequired(true);sap.ui.getCore().byId("QALabel9").setText(f)}}}},error:function(e,t){sap.m.MessageToast.show("Please Contact your Administrator.")}})}},onSubmitQADialog:function(){this.refreshInputBinding();var e=this;var t=[sap.ui.getCore().byId("QAip1"),sap.ui.getCore().byId("QAip2"),sap.ui.getCore().byId("QAip3"),sap.ui.getCore().byId("QAip4"),sap.ui.getCore().byId("QAip5"),sap.ui.getCore().byId("QAip6"),sap.ui.getCore().byId("QAip7"),sap.ui.getCore().byId("QAip8"),sap.ui.getCore().byId("QAip9")];var a=/^[+]?([0-9]+(?:[\.][0-9]*)?|\.[0-9]+)$/;jQuery.each(t,function(e,t){if(t.getRequired()==true){if(t.getValue()==""){t.setValueState("Error")}else{if(t.getValue().match(a)){t.setValueState("None")}else{sap.m.MessageToast.show("Please Enter the Positive Fields!!!");t.setValueState("Error")}}}});var i=true;jQuery.each(t,function(e,t){if(t.getValueState()==="Error"){i=false;return false}});if(!i){sap.m.MessageToast.show("Please Fill all Mandatory fields with Positive Numbers")}else{this._oDialog1.close();var e=this;var l=sap.ui.getCore().byId("QAip1").getValue();var d=sap.ui.getCore().byId("QAip2").getValue();var o=sap.ui.getCore().byId("QAip3").getValue();var n=sap.ui.getCore().byId("QAip4").getValue();var u=sap.ui.getCore().byId("QAip5").getValue();var b=sap.ui.getCore().byId("QAip6").getValue();var g=sap.ui.getCore().byId("QAip7").getValue();var y=sap.ui.getCore().byId("QAip8").getValue();var h=sap.ui.getCore().byId("QAip9").getValue();var I=this.byId("InspLot").getValue();var c={Field10:l,Field20:d,Field30:o,Field40:n,Field50:u,Field60:b,Field70:g,Field80:y,Field90:h,Insplot:I,ChnoField10:"0010",ChnoField20:"0020",ChnoField30:"0030",ChnoField40:"0040",ChnoField50:"0050",ChnoField60:"0060",ChnoField70:"0070",ChnoField80:"0080",ChnoField90:"0090"};r.create("/QASet",c,{Method:"PUT",success:function(t,a){e.byId("BtnGenPay").setVisible(true);e.onCancelQADialog();var i=t.Message;var r=t.UsageDecision;if(i==""){var l=new DOMParser;var d=a.headers["sap-message"];var o=l.parseFromString(d,"text/xml");var n=o.getElementsByTagName("message")[0].childNodes[0].nodeValue;s.error(n)}else{s.success(i);e.byId("BtnGenQA").setVisible(true);if(r=="A"){var u="A-Accept";e.byId("UsageDes").setValue(u)}else{e.byId("UsageDes").setValue(r)}}this.refreshInputBinding()},error:function(e,t){}})}},refreshInputBinding:function(){sap.ui.getCore().byId("QALabel1").setVisible(false);sap.ui.getCore().byId("QAip1").setVisible(false);sap.ui.getCore().byId("QALabel2").setVisible(false);sap.ui.getCore().byId("QAip2").setVisible(false);sap.ui.getCore().byId("QALabel3").setVisible(false);sap.ui.getCore().byId("QAip3").setVisible(false);sap.ui.getCore().byId("QALabel4").setVisible(false);sap.ui.getCore().byId("QAip4").setVisible(false);sap.ui.getCore().byId("QALabel5").setVisible(false);sap.ui.getCore().byId("QAip5").setVisible(false);sap.ui.getCore().byId("QALabel6").setVisible(false);sap.ui.getCore().byId("QAip6").setVisible(false);sap.ui.getCore().byId("QALabel7").setVisible(false);sap.ui.getCore().byId("QAip7").setVisible(false);sap.ui.getCore().byId("QALabel8").setVisible(false);sap.ui.getCore().byId("QAip8").setVisible(false);sap.ui.getCore().byId("QALabel9").setVisible(false);sap.ui.getCore().byId("QAip9").setVisible(false)},onCancelQADialog:function(){this._oDialog1.close();this.refreshInputBinding()},GeneratePayment:function(){var e=this.byId("GatePassNo").getValue();var t={Gpassno:e};r.create("PaymentSet",t,{Method:"PUT",success:function(e,t){var a=e.Message;var i=e.NetPayAmount;if(a==""){var r="Your Net Payable Amount is: ";s.success(r+" "+i)}else{s.error(a)}},error:function(e,t){}})},FieldEditFalseSave:function(){this.byId("LRGRno").setEditable(false);this.byId("Truckno").setEditable(false);this.byId("Station").setEditable(false);this.byId("TransDetail").setEditable(false);this.byId("PartyBill").setEditable(false);this.byId("PartyDate").setEditable(false);this.byId("BillWeight").setEditable(false);this.byId("Billbags").setEditable(false);this.byId("WeightSlipNo").setEditable(false)},AllFieldEditableTrue:function(){this.byId("Savebtn").setVisible(true);this.byId("Cancelbtn").setVisible(true);this.byId("BtnGoodMov").setVisible(true);this.byId("BtnGenQA").setVisible(true);this.byId("BtnGenPay").setVisible(true);this.byId("printGp").setVisible(false);this.byId("LRGRno").setEditable(true);this.byId("Truckno").setEditable(true);this.byId("Station").setEditable(true);this.byId("TransDetail").setEditable(true);this.byId("PartyBill").setEditable(true);this.byId("BillWeight").setEditable(true);this.byId("Billbags").setEditable(true);this.byId("WeightSlipNo").setEditable(true);this.byId("Quality_deduct").setEditable(true);this.byId("Pay_Weight").setEditable(true);this.byId("GunnyBag_deduct").setEditable(true);this.byId("UnloadCharge_deduct").setEditable(true);this.byId("Store_loc").setEditable(true);this.byId("UnloadedWeight").setEditable(true);this.byId("RejectedWeight").setEditable(true);this.byId("RejectedBags").setEditable(true);this.byId("TornedBags").setEditable(true);this.byId("MandiTax").setEditable(true);this.byId("OtherDeduct").setEditable(true);this.byId("AnyOtherDeduct").setEditable(true);this.byId("RateDiff").setEditable(true);this.byId("remarksany").setEditable(true);this.getView().byId("Savebtn").setEnabled(true);this.getView().byId("Cancelbtn").setEnabled(true)},AllFieldEditableFalse:function(){var e=this;if(c=="X"){e.byId("Quality_deduct").setSelected(true)}else{e.byId("Quality_deduct").setSelected(false)}if(m=="X"){e.byId("Pay_Weight").setSelected(true)}else{e.byId("Pay_Weight").setSelected(false)}if(f=="X"){e.byId("GunnyBag_deduct").setSelected(true)}else{e.byId("GunnyBag_deduct").setSelected(false)}if(V=="X"){e.byId("UnloadCharge_deduct").setSelected(true)}else{e.byId("UnloadCharge_deduct").setSelected(false)}this.byId("Savebtn").setVisible(false);this.byId("Cancelbtn").setVisible(false);this.byId("BtnGoodMov").setVisible(false);this.byId("BtnGenQA").setVisible(false);this.byId("BtnGenPay").setVisible(false);this.byId("printGp").setVisible(true);this.byId("LRGRno").setEditable(false);this.byId("Truckno").setEditable(false);this.byId("Station").setEditable(false);this.byId("TransDetail").setEditable(false);this.byId("PartyBill").setEditable(false);this.byId("BillWeight").setEditable(false);this.byId("Billbags").setEditable(false);this.byId("WeightSlipNo").setEditable(false);this.byId("Quality_deduct").setEditable(false);this.byId("Pay_Weight").setEditable(false);this.byId("GunnyBag_deduct").setEditable(false);this.byId("UnloadCharge_deduct").setEditable(false);this.byId("Store_loc").setEditable(false);this.byId("UnloadedWeight").setEditable(false);this.byId("UnloadBags").setEditable(false);this.byId("RejectedWeight").setEditable(false);this.byId("RejectedBags").setEditable(false);this.byId("TornedBags").setEditable(false);this.byId("ReceiptNum").setEditable(false);this.byId("MandiTax").setEditable(false);this.byId("OtherDeduct").setEditable(false);this.byId("AnyOtherDeduct").setEditable(false);this.byId("RateDiff").setEditable(false);this.byId("remarksany").setEditable(false)},SetZeroVal:function(){this.byId("BillWeight").setValue("0.00");this.byId("UnloadedWeight").setValue("0.00");this.byId("UnloadBags").setValue("0.00");this.byId("RejectedWeight").setValue("0.00");this.byId("RejectedBags").setValue("0.00");this.byId("TornedBags").setValue("0.00");this.byId("RateDiff").setValue("0.00");this.byId("Avg_wt").setValue("0")},FieldEditFalseMigo:function(){this.byId("Store_loc").setEditable(false);this.byId("UnloadedWeight").setEditable(false);this.byId("UnloadBags").setEditable(false);this.byId("RejectedWeight").setEditable(false);this.byId("RejectedBags").setEditable(false);this.byId("TornedBags").setEditable(false);this.byId("Avg_wt").setEditable(false);this.byId("ReceiptNum").setEditable(false);this.byId("MandiTax").setEditable(false);this.byId("OtherDeduct").setEditable(false);this.byId("AnyOtherDeduct").setEditable(false);this.byId("RateDiff").setEditable(false)},printgp:function(){var e=this;var t=this.byId("GatePassNo").getValue();var a="GATEPASS";r.read("/SmartformSet(Gpassno='"+t+"',Formname='"+a+"')/$value",{method:"GET",success:function(t,a){var s=a.requestUri;e._pdfViewer.setSource(s);e._pdfViewer.setTitle("Gate Pass Form");e._pdfViewer.open()},error:function(e,t){sap.m.MessageToast.show("Somthing is wrong. Please contact your Backend Administrator")}})},ValueHelpRequestforStation:function(){r.read("zmm_stationset",{method:"GET",success:function(e,t){var a=new sap.ui.model.json.JSONModel;a.setData(e);this.getOwnerComponent().setModel(a,"StationModel");if(!this.StationFrag){this.StationFrag=sap.ui.xmlfragment("MaizeProcurementPortal.MaizeProcurementPortal.Fragment.StationF4",this);this.getView().addDependent(this.StationFrag)}this.StationFrag.open()}.bind(this),error:function(e){}})},closeDlg:function(e){var t=e.getParameter("selectedItem");if(t){this.desc=t.getDescription();this.key=t.getTitle()}this.getView().byId("Station").setValue(this.desc);this.StationFrag.destroy();this.StationFrag=undefined},livechangesearch:function(e){var t=e.mParameters.value;var a=new sap.ui.model.Filter([new sap.ui.model.Filter("ST_CODE",sap.ui.model.FilterOperator.Contains,t),new sap.ui.model.Filter("ST_NAME",sap.ui.model.FilterOperator.Contains,t)]);var s=sap.ui.getCore().byId("StationDialog").getBinding("items");s.filter([a])}})});
//# sourceMappingURL=ChanDispScreen.controller.js.map